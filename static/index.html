<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <script type="text/javascript" src="js/google-calendar.js"></script>
  </head>
  <body>
    <button id="btn-login" type="button" onclick="login()" disabled>Login</button>
    <script type="text/javascript">
      function handleClientLoad(){
        GoogleCalendar.initAPI().then(
          () => document.querySelector('#btn-login').removeAttribute('disabled')
        )
      }
      function login(){
        GoogleCalendar.login()
        .then(() =>
          GoogleCalendar.listCalendars()
        )
        .then(response => {
          console.log(response);
        })
      }
    </script>
    <script async defer src="https://apis.google.com/js/api.js"
      onload="this.onload=function(){}; handleClientLoad()"
      onreadystatechange="if (this.readyState === 'complete') this.onload()">
    </script>
  </body>
</html>
